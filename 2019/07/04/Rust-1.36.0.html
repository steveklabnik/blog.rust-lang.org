<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>Announcing Rust 1.36.0 | Rust Blog</title>
    <meta name="viewport" content="width=device-width,initial-scale=1.0">
<meta name="description" content="Empowering everyone to build reliable and efficient software.">
     <!-- Twitter card -->
 <meta name="twitter:card" content="summary">
 <meta name="twitter:site" content="@rustlang">
 <meta name="twitter:creator" content="@rustlang">
 <meta name="twitter:title" content="Announcing Rust 1.36.0 | Rust Blog">
 <meta name="twitter:description" content="Empowering everyone to build reliable and efficient software.">
<meta name="twitter:image" content="https://www.rust-lang.org/static/images/rust-social.jpg">

<!-- Facebook OpenGraph -->
<meta property="og:title" content="Announcing Rust 1.36.0 | Rust Blog" />
<meta property="og:description" content="Empowering everyone to build reliable and efficient software.">
<meta property="og:image" content="https://www.rust-lang.org/static/images/rust-social-wide.jpg" />
<meta property="og:type" content="website" />
<meta property="og:locale" content="en_US" />

<!-- styles -->
<link rel="stylesheet" href="/styles/vendor.css"/>
<link rel="stylesheet" href="/styles/fonts.css"/>
<link rel="stylesheet" href="/styles/app.css"/>
<link rel="stylesheet" href="/styles/highlight.css"/>

<!-- favicon -->
<link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32.png">
<link rel="icon" type="image/svg+xml" href="/images/favicon.svg">
<link rel="manifest" href="/images/site.webmanifest">
<link rel="mask-icon" href="/images/safari-pinned-tab.svg" color="#5bbad5">
<meta name="msapplication-TileColor" content="#00aba9">
<meta name="theme-color" content="#ffffff">

 <!-- atom -->
 <link type="application/atom+xml" rel="alternate" href="https://blog.rust-lang.org/feed.xml" title="Rust Blog" />

  </head>
  <body>
    <nav class="flex flex-row justify-center justify-end-l items-center flex-wrap ph2 pl3-ns pr4-ns">
  <div class="brand flex-auto w-100 w-auto-l self-start tc tl-l">
    <a href="/">
      <img class="v-mid ml0-l" alt="Rust Logo" src="/images/rust-logo-blk.svg">
      <span class="dib ml1 ml0-l">Rust Blog</span>
    </a>
  </div>

  <ul class="nav list w-100 w-auto-l flex flex-none flex-row flex-wrap justify-center justify-end-l items-center pv2 ph0 ph4-ns">
    <li class="tc pv2 ph2 ph4-ns flex-20-s"><a href="https://www.rust-lang.org">Rust</a></li>
    <li class="tc pv2 ph2 ph4-ns flex-20-s"><a href="https://www.rust-lang.org/tools/install">Install</a></li>
    <li class="tc pv2 ph2 ph4-ns flex-20-s"><a href="https://www.rust-lang.org/learn">Learn</a></li>
    <li class="tc pv2 ph2 ph4-ns flex-20-s"><a href="https://www.rust-lang.org/tools">Tools</a></li>
    <li class="tc pv2 ph2 ph4-ns flex-20-s"><a href="https://www.rust-lang.org/governance">Governance</a></li>
    <li class="tc pv2 ph2 ph4-ns flex-20-s"><a href="https://www.rust-lang.org/community">Community</a></li>
  </ul>
</nav>

<section id="Announcing Rust 1.36.0" class="white">
  <div class="w-100 mw-none ph3 mw8-m mw8-l center f3">
    <header>
      <h2>Announcing Rust 1.36.0</h2>
      <div class="highlight mt2 mb3"></div>
    </header>

    <div class="publish-date-author">July 4, 2019 &middot; The Rust Release Team
    
    </div>

    <div class="post">
      <p>The Rust team is happy to announce a new version of Rust, 1.36.0.
Rust is a programming language that is empowering everyone to build reliable and efficient software.</p>
<p>If you have a previous version of Rust installed via rustup, getting Rust 1.36.0 is as easy as:</p>
<pre><code class="language-console">rustup update stable
</code></pre>
<p>If you don't have it already, you can <a href="https://www.rust-lang.org/install.html">get <code>rustup</code></a> from the appropriate page on our website,
and check out the <a href="https://github.com/rust-lang/rust/blob/master/RELEASES.md#version-1360-2019-07-04">detailed release notes for 1.36.0</a> on GitHub.</p>
<h2><a href="#whats-in-1360-stable" aria-hidden="true" class="anchor" id="whats-in-1360-stable"></a>What's in 1.36.0 stable</h2>
<p>This release brings many changes, including the stabilization of the <a href="https://doc.rust-lang.org/std/future/trait.Future.html"><code>Future</code></a> trait,
the <a href="https://doc.rust-lang.org/alloc/index.html"><code>alloc</code></a> crate, the <a href="https://doc.rust-lang.org/std/mem/union.MaybeUninit.html"><code>MaybeUninit&lt;T&gt;</code></a> type, <a href="http://blog.pnkfx.org/blog/2019/06/26/breaking-news-non-lexical-lifetimes-arrives-for-everyone/">NLL for Rust 2015</a>,
a new <code>HashMap&lt;K, V&gt;</code> implementation, and <a href="https://doc.rust-lang.org/cargo/commands/cargo-build.html#cargo_build_manifest_options"><code>--offline</code></a> support in Cargo.
Read on for a few highlights, or see the <a href="https://github.com/rust-lang/rust/blob/master/RELEASES.md#version-1360-2019-07-04">detailed release notes</a> for additional information.</p>
<h3><a href="#the-future-is-here" aria-hidden="true" class="anchor" id="the-future-is-here"></a>The <a href="https://doc.rust-lang.org/std/future/trait.Future.html"><code>Future</code></a> is here!</h3>
<p>In Rust 1.36.0 the long awaited <a href="https://doc.rust-lang.org/std/future/trait.Future.html"><code>Future</code></a> trait has been <a href="https://github.com/rust-lang/rust/pull/59739">stabilized</a>!</p>
<p>With this stabilization, we hope to give important crates, libraries,
and the ecosystem time to prepare for <code>async</code> / <code>.await</code>,
which we'll tell you more about in the future.</p>
<h3><a href="#the-alloc-crate-is-stable" aria-hidden="true" class="anchor" id="the-alloc-crate-is-stable"></a>The <a href="https://doc.rust-lang.org/alloc/index.html"><code>alloc</code></a> crate is stable</h3>
<p>Before 1.36.0, the standard library consisted of the crates <code>std</code>, <code>core</code>, and <code>proc_macro</code>.
The <code>core</code> crate provided core functionality such as <code>Iterator</code> and <code>Copy</code>
and could be used in <code>#![no_std]</code> environments since it did not impose any requirements.
Meanwhile, the <code>std</code> crate provided types like <code>Box&lt;T&gt;</code> and OS functionality
but required a global allocator and other OS capabilities in return.</p>
<p>Starting with Rust 1.36.0, the parts of <code>std</code> that depend on a global allocator, e.g. <code>Vec&lt;T&gt;</code>,
are now available in the <code>alloc</code> crate. The <code>std</code> crate then re-exports these parts.
While <code>#![no_std]</code> <em>binaries</em> using <code>alloc</code> still require nightly Rust,
<code>#![no_std]</code> <em>library</em> crates can use the <code>alloc</code> crate in stable Rust.
Meanwhile, normal binaries, without <code>#![no_std]</code>, can depend on such library crates.
We hope this will facilitate the development of a <code>#![no_std]</code> compatible ecosystem of libraries
prior to stabilizing support for <code>#![no_std]</code> binaries using <code>alloc</code>.</p>
<p>If you are the maintainer of a library that only relies on some allocation primitives to function,
consider making your library <code>#[no_std]</code> compatible by using the following at the top of your <code>lib.rs</code> file:</p>
<pre><code class="language-rust">#![no_std]

extern crate alloc;

use alloc::vec::Vec;
</code></pre>
<h3><a href="#maybeuninitt-instead-of-memuninitialized" aria-hidden="true" class="anchor" id="maybeuninitt-instead-of-memuninitialized"></a><a href="https://doc.rust-lang.org/std/mem/union.MaybeUninit.html"><code>MaybeUninit&lt;T&gt;</code></a> instead of <a href="https://doc.rust-lang.org/std/mem/fn.uninitialized.html"><code>mem::uninitialized</code></a></h3>
<p>In previous releases of Rust, the <a href="https://doc.rust-lang.org/std/mem/fn.uninitialized.html"><code>mem::uninitialized</code></a> function has allowed you to bypass Rust's
initialization checks by pretending that you've initialized a value at type <code>T</code> without doing anything.
One of the main uses of this function has been to lazily allocate arrays.</p>
<p>However, <a href="https://doc.rust-lang.org/std/mem/fn.uninitialized.html"><code>mem::uninitialized</code></a> is an incredibly dangerous operation that essentially
cannot be used correctly as the Rust compiler assumes that values are properly initialized.
For example, calling <code>mem::uninitialized::&lt;bool&gt;()</code> causes <em>instantaneous <strong>undefined behavior</strong></em>
as, from Rust's point of view, the uninitialized bits are neither <code>0</code> (for <code>false</code>)
nor <code>1</code> (for <code>true</code>) - the only two allowed bit patterns for <code>bool</code>.</p>
<p>To remedy this situation, in Rust 1.36.0, the type <a href="https://doc.rust-lang.org/std/mem/union.MaybeUninit.html"><code>MaybeUninit&lt;T&gt;</code></a> has been <a href="https://github.com/rust-lang/rust/pull/60445">stabilized</a>.
The Rust compiler will understand that it should not assume that a <a href="https://doc.rust-lang.org/std/mem/union.MaybeUninit.html"><code>MaybeUninit&lt;T&gt;</code></a> is a properly initialized <code>T</code>.
Therefore, you can do gradual initialization more safely and eventually use <code>.assume_init()</code>
once you are certain that <code>maybe_t: MaybeUninit&lt;T&gt;</code> contains an initialized <code>T</code>.</p>
<p>As <a href="https://doc.rust-lang.org/std/mem/union.MaybeUninit.html"><code>MaybeUninit&lt;T&gt;</code></a> is the safer alternative, starting with Rust 1.39,
the function <a href="https://doc.rust-lang.org/std/mem/fn.uninitialized.html"><code>mem::uninitialized</code></a> will be deprecated.</p>
<p>To find out more about uninitialized memory, <a href="https://doc.rust-lang.org/std/mem/fn.uninitialized.html"><code>mem::uninitialized</code></a>,
and <a href="https://doc.rust-lang.org/std/mem/union.MaybeUninit.html"><code>MaybeUninit&lt;T&gt;</code></a>, read <a href="https://gankro.github.io/blah/initialize-me-maybe/">Alexis Beingessner's blog post</a>.
The standard library also contains extensive documentation about <a href="https://doc.rust-lang.org/std/mem/union.MaybeUninit.html"><code>MaybeUninit&lt;T&gt;</code></a>.</p>
<h3><a href="#nll-for-rust-2015" aria-hidden="true" class="anchor" id="nll-for-rust-2015"></a>NLL for Rust 2015</h3>
<p><a href="https://blog.rust-lang.org/2018/12/06/Rust-1.31-and-rust-2018.html#non-lexical-lifetimes">In the announcement for Rust 1.31.0</a>, we told you about NLL (Non-Lexical Lifetimes),
an improvement to the language that makes the borrow checker smarter and more user friendly.
For example, you may now write:</p>
<pre><code class="language-rust">fn main() {
    let mut x = 5;
    let y = &amp;x;
    let z = &amp;mut x; // This was not allowed before 1.31.0.
}
</code></pre>
<p>In 1.31.0 NLL was stabilized only for Rust 2018,
with a promise that we would backport it to Rust 2015 as well.
With Rust 1.36.0, we are happy to announce that we have done so! NLL is now available for Rust 2015.</p>
<p>With NLL on both editions, we are closer to removing the old borrow checker.
However, the old borrow checker unfortunately accepted some <a href="https://en.wikipedia.org/wiki/Soundness">unsound</a> code it should not have.
As a result, NLL is currently in a &quot;migration mode&quot; wherein we will emit warnings instead
of errors if the NLL borrow checker rejects code the old AST borrow checker would accept.
Please see <a href="https://github.com/rust-lang/rust/issues/60680#issuecomment-495089654">this list</a> of public crates that are affected.</p>
<p>To find out more about NLL, MIR, the story around fixing soundness holes,
and what you can do about the warnings if you have them, read <a href="http://blog.pnkfx.org/blog/2019/06/26/breaking-news-non-lexical-lifetimes-arrives-for-everyone/">Felix Klock's blog post</a>.</p>
<h3><a href="#a-new-hashmapk-v-implementation" aria-hidden="true" class="anchor" id="a-new-hashmapk-v-implementation"></a>A new <a href="https://doc.rust-lang.org/std/collections/struct.HashMap.html"><code>HashMap&lt;K, V&gt;</code></a> implementation</h3>
<p>In Rust 1.36.0, the <code>HashMap&lt;K, V&gt;</code> implementation has been <a href="https://github.com/rust-lang/rust/pull/58623">replaced</a>
with the one in the <a href="https://crates.io/crates/hashbrown"><code>hashbrown</code></a> crate which is based on the <a href="https://abseil.io/blog/20180927-swisstables">SwissTable</a> design.
While the interface is the same, the <code>HashMap&lt;K, V&gt;</code> implementation is now
<a href="https://perf.rust-lang.org/compare.html?start=b57fe74a27590289fd657614b8ad1f3eac8a7ad2&end=abade53a649583e40ed07c26ee10652703f09b58&stat=wall-time">faster on average</a> and has lower memory overhead.
Note that unlike the <code>hashbrown</code> crate,
the implementation in <code>std</code> still defaults to the SipHash 1-3 hashing algorithm.</p>
<h3><a href="#--offline-support-in-cargo" aria-hidden="true" class="anchor" id="--offline-support-in-cargo"></a><a href="https://doc.rust-lang.org/cargo/commands/cargo-build.html#cargo_build_manifest_options"><code>--offline</code></a> support in Cargo</h3>
<p>During most builds, Cargo doesn't interact with the network.
Sometimes, however, Cargo has to.
Such is the case when a dependency is added and the latest compatible version needs to be downloaded.
At times, network access is not an option though, for example on an airplane or in isolated build environments.</p>
<p>In Rust 1.36, a new Cargo flag has been stabilized: <a href="https://doc.rust-lang.org/cargo/commands/cargo-build.html#cargo_build_manifest_options"><code>--offline</code></a>.
The flag alters Cargo's dependency resolution algorithm to only use locally cached dependencies.
When the required crates are not available offline, and a network access would be required,
Cargo will exit with an error.
To prepopulate the local cache in preparation for going offline,
use the <a href="https://doc.rust-lang.org/cargo/commands/cargo-fetch.html"><code>cargo fetch</code></a> command, which downloads all the required dependencies for a project.</p>
<p>To find out more about <a href="https://doc.rust-lang.org/cargo/commands/cargo-build.html#cargo_build_manifest_options"><code>--offline</code></a> and <a href="https://doc.rust-lang.org/cargo/commands/cargo-fetch.html"><code>cargo fetch</code></a>, read <a href="https://www.ncameron.org/blog/cargo-offline/">Nick Cameron's blog post</a>.</p>
<p>For information on other changes to Cargo, see the <a href="https://github.com/rust-lang/cargo/blob/master/CHANGELOG.md#cargo-136-2019-07-04">detailed release notes</a>.</p>
<h3><a href="#library-changes" aria-hidden="true" class="anchor" id="library-changes"></a>Library changes</h3>
<p>The <a href="https://doc.rust-lang.org/std/macro.dbg.html"><code>dbg!</code></a> macro now supports multiple arguments.</p>
<p>Additionally, a number of APIs have been made <code>const</code>:</p>
<ul>
<li><a href="https://doc.rust-lang.org/core/alloc/struct.Layout.html#method.from_size_align_unchecked"><code>Layout::from_size_align_unchecked</code></a></li>
<li><a href="https://doc.rust-lang.org/std/mem/fn.needs_drop.html"><code>mem::needs_drop</code></a></li>
<li><a href="https://doc.rust-lang.org/std/ptr/struct.NonNull.html#method.dangling"><code>NonNull::dangling</code></a></li>
<li><a href="https://doc.rust-lang.org/std/ptr/struct.NonNull.html#method.cast"><code>NonNull::cast</code></a></li>
</ul>
<p>New APIs have become stable, including:</p>
<ul>
<li><a href="https://doc.rust-lang.org/std/task/struct.Waker.html"><code>task::Waker</code></a> and <a href="https://doc.rust-lang.org/std/task/enum.Poll.html"><code>task::Poll</code></a></li>
<li><a href="https://doc.rust-lang.org/std/collections/struct.VecDeque.html#method.rotate_left"><code>VecDeque::rotate_left</code></a> and <a href="https://doc.rust-lang.org/std/collections/struct.VecDeque.html#method.rotate_right"><code>VecDeque::rotate_right</code></a></li>
<li><a href="https://doc.rust-lang.org/std/io/trait.Read.html#method.read_vectored"><code>Read::read_vectored</code></a> and <a href="https://doc.rust-lang.org/std/io/trait.Write.html#method.write_vectored"><code>Write::write_vectored</code></a></li>
<li><a href="https://doc.rust-lang.org/std/iter/trait.Iterator.html#method.copied"><code>Iterator::copied</code></a></li>
<li><a href="https://github.com/rust-lang/rust/pull/60404"><code>BorrowMut&lt;str&gt; for String</code></a></li>
<li><a href="https://doc.rust-lang.org/std/primitive.str.html#method.as_mut_ptr"><code>str::as_mut_ptr</code></a></li>
</ul>
<p>Other library changes are available in the <a href="https://github.com/rust-lang/rust/blob/master/RELEASES.md#version-1360-2019-07-04">detailed release notes</a>.</p>
<h3><a href="#other-changes" aria-hidden="true" class="anchor" id="other-changes"></a>Other changes</h3>
<p>Detailed 1.36.0 release notes are available for <a href="https://github.com/rust-lang/rust/blob/master/RELEASES.md#version-1360-2019-07-04">Rust</a>,
<a href="https://github.com/rust-lang/cargo/blob/master/CHANGELOG.md#cargo-136-2019-07-04">Cargo</a>, and <a href="https://github.com/rust-lang/rust-clippy/blob/master/CHANGELOG.md#rust-136">Clippy</a>.</p>
<h2><a href="#contributors-to-1360" aria-hidden="true" class="anchor" id="contributors-to-1360"></a>Contributors to 1.36.0</h2>
<p>Many people came together to create Rust 1.36.0. We couldn't have done it
without all of you. <a href="https://thanks.rust-lang.org/rust/1.36.0/">Thanks!</a></p>

    </div>
  </div>
</section>

    <footer>
  <div class="w-100 mw-none ph3 mw8-m mw9-l center f3">
    <div class="row">
      <div class="four columns mt3 mt0-l" id="get-help">
        <h4>Get help!</h4>
        <ul>
          <li><a href="https://doc.rust-lang.org" target="_blank" rel="noopener">Documentation</a></li>
          <li><a href="mailto:core-team@rust-lang.org">Contact the Rust Team</a></li>
          <li><a href="http://ping.rust-lang.org">Check Website Status</a></li>
        </ul>
      </div>
      <div class="four columns mt3 mt0-l">
        <h4>Terms and policies</h4>
        <ul>
          <li><a href="https://www.rust-lang.org/policies/code-of-conduct">Code of Conduct</a></li>
          <li><a href="https://www.rust-lang.org/policies/licenses">Licenses</a></li>
          <li><a href="https://www.rust-lang.org/policies/media-guide">Logo Policy and Media Guide</a></li>
          <li><a href="https://www.rust-lang.org/policies/security">Security Disclosures</a></li>
          <li><a href="https://www.rust-lang.org/policies">All Policies</a></li>
        </ul>
      </div>
      <div class="four columns mt3 mt0-l">
        <h4>Social</h4>
        <a href="https://twitter.com/rustlang" target="_blank" rel="noopener" alt="twitter link"><img src="/images/twitter.svg" alt="twitter logo" title="Twitter"/></a>
        <a href="https://www.youtube.com/channel/UCaYhcUwRBNscFNUKTjgPFiA" target="_blank" rel="noopener" alt="youtube link"><img style="padding-top: 6px; padding-bottom:6px" src="/images/youtube.svg" alt="youtube logo" title="YouTube"/></a>
        <a href="https://discord.gg/rust-lang" target="_blank" rel="noopener" alt="discord link"><img src="/images/discord.svg" alt="discord logo" title="Discord"/></a>
        <a href="https://github.com/rust-lang" target="_blank" rel="noopener" alt="github link"><img src="/images/github.svg" alt="github logo" title="GitHub"/></a>
      </div>

    </div>
    <div class="attribution">
      Maintained by the Rust Team. See a typo?
      <a href="https://github.com/rust-lang/blog.rust-lang.org" target="_blank" rel="noopener">Send a fix here</a>!
    </div>
  </div>
</footer>

<!-- scripts -->
<script src="/scripts/highlight.js"></script>

  </body>
</html>
